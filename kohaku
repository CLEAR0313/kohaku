<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>恋愛・花タイプ診断</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI','Hiragino Kaku Gothic ProN','Meiryo',sans-serif;
      background: #fff6ea;
      margin: 0;
      padding: 0;
    }
    .content {
      background: #ffffffdd;
      max-width: 600px;
      margin: 40px auto;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #c45ca0;
      margin-bottom: 1.5em;
    }
    .question { margin-top: 1.5em; }
    .choices label { display: block; margin-bottom: 8px; }
    button[type="submit"] {
      margin-top: 28px;
      padding: 0.7em 2em;
      font-size: 1.1em;
      border-radius: 8px;
      border: none;
      background: #e14e9a;
      color: #fff;
      cursor: pointer;
      width: 100%;
    }
    #result {
      margin-top: 2em;
      padding: 1.2em;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      font-size: 1.1em;
    }
    #result img {
      width: 100%;
      margin-top: 1em;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>恋愛「花タイプ」診断</h1>

    <form id="flowerForm">

      <!-- ☆ 質問：Q1〜Q3 -->
      <h2>質問【☆】</h2>

      <div class="question">
        <div>☆Q1「恋をすると、好きな人のことをつい考える時間が多くなる」</div>
        <div class="choices">
          <label><input type="radio" name="q1" value="A" required> A：はい</label>
          <label><input type="radio" name="q1" value="B"> B：どっちともいえない</label>
          <label><input type="radio" name="q1" value="C"> C：いいえ</label>
        </div>
      </div>

      <div class="question">
        <div>☆Q2「恋人とは、意見や不満があるたびに話し合う時間が欲しい」</div>
        <div class="choices">
          <label><input type="radio" name="q2" value="A" required> A：はい</label>
          <label><input type="radio" name="q2" value="B"> B：どっちともいえない</label>
          <label><input type="radio" name="q2" value="C"> C：いいえ</label>
        </div>
      </div>

      <div class="question">
        <div>☆Q3「好きな人ができると、その人との時間を優先してしまう」</div>
        <div class="choices">
          <label><input type="radio" name="q3" value="A" required> A：はい</label>
          <label><input type="radio" name="q3" value="B"> B：どっちともいえない</label>
          <label><input type="radio" name="q3" value="C"> C：いいえ</label>
        </div>
      </div>

      <!-- ♡ 質問：Q4〜Q6 -->
      <h2 style="margin-top:40px;">質問【♡】</h2>

      <div class="question">
        <div>♡Q4「恋人とは、こまめに連絡を取り合えるほうが安心する」</div>
        <div class="choices">
          <label><input type="radio" name="q4" value="A" required> A：はい</label>
          <label><input type="radio" name="q4" value="B"> B：どっちともいえない</label>
          <label><input type="radio" name="q4" value="C"> C：いいえ</label>
        </div>
      </div>

      <div class="question">
        <div>♡Q5「会わない時間が長すぎると少し不安になる」</div>
        <div class="choices">
          <label><input type="radio" name="q5" value="A" required> A：はい</label>
          <label><input type="radio" name="q5" value="B"> B：どっちともいえない</label>
          <label><input type="radio" name="q5" value="C"> C：いいえ</label>
        </div>
      </div>

      <div class="question">
        <div>♡Q6「恋人とは、一緒に過ごす時間が多いほうが嬉しい」</div>
        <div class="choices">
          <label><input type="radio" name="q6" value="A" required> A：はい</label>
          <label><input type="radio" name="q6" value="B"> B：どっちともいえない</label>
          <label><input type="radio" name="q6" value="C"> C：いいえ</label>
        </div>
      </div>

      <button type="submit">診断する</button>
    </form>

    <div id="result"></div>
  </div>

  <script>
    document.getElementById("flowerForm").addEventListener("submit", function(e){
      e.preventDefault();

      // ☆の回答
      let starAnswers = [
        document.querySelector('input[name="q1"]:checked').value,
        document.querySelector('input[name="q2"]:checked').value,
        document.querySelector('input[name="q3"]:checked').value
      ];

      // ♡の回答
      let heartAnswers = [
        document.querySelector('input[name="q4"]:checked').value,
        document.querySelector('input[name="q5"]:checked').value,
        document.querySelector('input[name="q6"]:checked').value
      ];

      function mostFrequent(arr){
        let count = {A:0, B:0, C:0};
        arr.forEach(a => count[a]++);
        let max = Math.max(count.A, count.B, count.C);

        // 同数のときは追加質問が必要 → ここでは「未確定」とする
        let result = Object.keys(count).filter(k => count[k] === max);
        return result.length === 1 ? result[0] : "TIE";
      }

      let star = mostFrequent(starAnswers);
      let heart = mostFrequent(heartAnswers);

      let html = `<h3>診断結果</h3>`;

      if(star === "TIE"){
        html += `<p>☆の回答が同数でした。追加質問にお答えください。</p>`;
      } else {
        html += `<p>☆（恋の始まり方） → <strong>${star}</strong></p>`;
      }

      if(heart === "TIE"){
        html += `<p>♡の回答が同数でした。追加質問にお答えください。</p>`;
      } else {
        html += `<p>♡（理想の関係性） → <strong>${heart}</strong></p>`;
      }

      // 結果画像の表示（あなたが貼った診断表）
      html += `<img src="flower_chart.png" alt="花タイプ診断表">`;

      document.getElementById("result").innerHTML = html;
    });
  </script>
</body>
</html>
